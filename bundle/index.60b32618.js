var b=Object.defineProperty;var A=(t,e,i)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var f=(t,e,i)=>(A(t,typeof e!="symbol"?e+"":e,i),i);const k=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}};k();const o={tap:new Audio("sounds/tap1.wav"),navForward:new Audio("sounds/nav1.flac"),navBackward:new Audio("sounds/nav2.flac"),refresh:new Audio("sounds/refresh.flac"),shutter:new Audio("sounds/shutter.flac")};o.tap.volume=.5;o.navForward.volume=.1;o.navBackward.volume=.2;o.shutter.volume=.05;function v(){o.tap.play()}function S(){o.refresh.play()}function E(){o.shutter.play()}function m(t=!0,e=!1){navigator.vibrate(e?20:15),t?o.navForward.play():o.navBackward.play()}var L=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sounds:o,tap:v,refresh:S,shutter:E,navigate:m});const O=location.origin+(document.querySelector('head > link[rel="root"]')?.getAttribute("href")??"/");D();const s={get mains(){return document.querySelectorAll("body > main")},get main(){return this.mains[this.mains.length-1]},nav:document.querySelector("body > nav"),links:document.querySelectorAll("body > nav > [page]"),header:document.querySelector("body > header")},w={async afterload(){s.main.removeAttribute("afterload"),setTimeout(()=>s.main.setAttribute("afterload",""),0)},async fullview(t=!1){t?document.body.removeAttribute("fullview"):document.body.setAttribute("fullview","")}},l={_bottom:"home",get values(){return[this._bottom,...location.pathname.split("/").filter(t=>t!="")]},push(t){history.pushState(null,"",`${location.pathname.slice(1)}/${t}`),m(!0,!0),this.apply()},get bottom(){return this.values.length==1?this._bottom:null},set bottom(t){t&&this.values.length==1&&(this._bottom=t),m(!0),this.apply()},get top(){return this.values[this.values.length-1]},get path(){return this.values.join("/")},async apply(){console.time("applystack"),console.log(`%c${this.path}`,"color: gold"),this.values.forEach(async(t,e)=>{s.mains[e]||s.main.insertAdjacentHTML("afterend","<main/>")}),s.mains.length>this.values.length?s.main.remove():w.afterload(),w.fullview(!!this.bottom),N(this.top),x(this.top,!!this.bottom).then(()=>console.timeEnd("applystack"))}};window.stack=l;l.apply();window.onpopstate=()=>l.apply();async function N(t){document.querySelectorAll("[page]").forEach(e=>e.getAttribute("page")==t?e.setAttribute("active",""):e.removeAttribute("active"))}async function x(t,e=!0){if(s.main.innerHTML=await T(`/views/${t}.html`),!e){const i=s.main.querySelector("header");if(!i)return;i.prepend(document.createElement("button")),i.children[0].outerHTML="<button icon navback>arrow_back</button>",i.children[0].addEventListener("click",()=>history.back())}}async function T(t){let i=await(await self.caches?.open("views"))?.match(t);return i||(s.nav.setAttribute("loading",""),i=await fetch(t),s.nav.removeAttribute("loading")),await i.text()}function D(){const t=window.fetch;window.fetch=(e,i)=>{if(e instanceof Request||!e.startsWith("/"))return t(e,i);const a=new URL(e.slice(1),O).href;return t(a,i)}}const u={ripple(t){return t.getAttribute("ripple")!=null||t.getAttribute("page")!=null||t.nodeName=="BUTTON"||t.nodeName=="HEADER"||!1},dialog(t){return t.nodeName=="DIALOG"},view(t){return!!t.getAttribute("view")},page(t){return!!t.getAttribute("page")},textfield(t){return t.nodeName=="TEXTFIELD"}},I=[{if:u.ripple,then(t){t.addEventListener("pointerdown",()=>y(t)),t.addEventListener("keydown",e=>{e.key=="Enter"&&y(t,10)})}},{if:u.dialog,then(t){t.setAttribute("open","")}},{if:u.view,then(t){t.onclick=()=>{const e=t.getAttribute("view");!e||l.push(e)}}},{if:u.page,then(t){t.onclick=()=>{const e=t.getAttribute("page");!e||(l.bottom=e)}}},{if:u.textfield,then(t){t.setAttribute("contenteditable","");const e=async()=>t.innerText==""?t.setAttribute("empty",""):t.removeAttribute("empty");e(),t.oninput=e}}];function y(t,e=0){t.getAttribute("disabled")==null&&(t.removeAttribute("afterclick"),setTimeout(()=>t.setAttribute("afterclick",""),e),v())}const q=new MutationObserver(t=>{t.forEach(e=>{e.addedNodes.forEach(i=>i.nodeName!="#text"?p(i):0)})});q.observe(document.body,{childList:!0,subtree:!0});document.querySelectorAll("body *").forEach(t=>p(t));function p(t){I.forEach(e=>{e.if(t)&&e.then(t)});for(const e in t.children){const i=t.children[e];i.getAttribute&&p(i)}}if(navigator.serviceWorker){location.host!="localhost:3500"&&navigator.serviceWorker?.register(new URL("/lifectl/sw.js",self.location).href),navigator.serviceWorker.onmessage=e=>{e.data=="update"&&location.reload()};const t=async()=>{if(!navigator.onLine){console.warn("%cCannot update caches while offline!","color: orange");return}navigator.serviceWorker.controller?.postMessage("update")};window.updateCaches=t}localStorage.setItem("intents",JSON.stringify({"Testovac\xED rutina":{history:[],tasks:["1. Krok","testovac\xED aktivita","3. Krok","4. Krok"]},"Dal\u0161\xED rutina":{history:[],tasks:[]}}));const _=JSON.parse(localStorage.getItem("intents"));window.Alpine.store("intents",_);const g=class{constructor(e,i="",a=[]){f(this,"created");this.duration=e,this.icon=i,this.records=a,this.created=new Date().valueOf()}get missing(){return this.nowIndex-this.records.length>=0?this.nowIndex-this.records.length:0}get stats(){return{done:this.records.filter(e=>e).length,rate:this.records.slice(-10).filter(e=>e).length/this.records.slice(-10).length}}get time(){return this.record?((this.record?.finish??new Date().getTime())-this.record.start)/1e3:null}get timeleft(){return this.time?this.duration-this.time:null}get record(){return this.records[this.records.length-1]??null}start(){return this.records[this.nowIndex]={start:new Date().getTime()},this.record}get nowIndex(){return Math.floor((new Date().valueOf()-this.created)/g.period)}finish(){!this.record||this.record.finish||(this.record.finish=new Date().getTime(),M())}cancel(){this.record&&(this.records[this.records.length-1].finish=void 0)}};let c=g;f(c,"period",6e4);window.Activity=c;localStorage.getItem("activities")||localStorage.setItem("activities",JSON.stringify({"testovac\xED aktivita":new c(180,"",[{start:1638696955630,finish:1638696957596},null,{start:1638697127965,finish:1638697129239},null,null,null,{start:1638697435715,finish:1638697437630}]),"dal\u0161\xED aktivita":new c(600)}));const d={};for(const t in JSON.parse(localStorage.getItem("activities"))){const e=JSON.parse(localStorage.getItem("activities"))[t];Object.setPrototypeOf(e,c.prototype),d[t]=e}window.Alpine.store("activities",d);window.activities=d;function M(){localStorage.setItem("activities",JSON.stringify(d))}window.sounds=L;
